<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MemberDAO">

	<select id="getAlias" parameterType="MemberVO" resultType="MemberVO">
        SELECT member_alias AS alias
        FROM member
        WHERE member_id = #{id}::uuid;
    </select>
    
    <select id="login" parameterType="LoginVO" resultType="MemberVO">
    	SELECT 
    		member_id AS id,
    		member_alias AS alias
    	FROM
    		member
    	<trim prefix="WHERE" prefixOverrides="AND">
    		AND member_email = #{email}
    		AND member_pw = #{pw}
    	</trim>
    </select>
    
    <insert id="signup" parameterType="MemberVO">
    	INSERT INTO member(
    		member_email,
    		member_pw,
    		member_name,
    		member_alias,
    		member_phone,
    		member_birth
    	) VALUES (
    		#{email},
    		#{pw},
    		#{name},
    		#{alias},
    		#{phone},
    		#{birth}::TIMESTAMP
    	)
    </insert>

</mapper>
